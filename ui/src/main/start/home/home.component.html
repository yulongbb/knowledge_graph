<div class="home" #scrollContainer style="height: 100%; overflow-y: scroll" infiniteScroll [infiniteScrollDistance]="2"
  [infiniteScrollThrottle]="50" (scrolled)="onScrollEntity()" [scrollWindow]="false">
  <!-- 导航栏 -->
  <nav class="navbar">
    <div class="logo">知识图谱</div>
    <div class="menu">
      <a [routerLink]="'/search'" [queryParams]="{ keyword: '' }">知识</a>
      <a [routerLink]="'/image'" [queryParams]="{ keyword: '' }">图片</a>
      <a [routerLink]="'/video'" [queryParams]="{ keyword: '' }">视频</a>
      <a [routerLink]="'/document'" [queryParams]="{ keyword: '' }">文档</a>
      <a [routerLink]="'/map'" [queryParams]="{ keyword: '' }">地图</a>
      <a [routerLink]="'/index/login'">登录</a>
    </div>
  </nav>

  <!-- 搜索框 -->
  <div class="search-container" #searchContainer [ngStyle]="searchContainerStyle">
    <input type="text" placeholder="搜索知识" class="search-box" [(ngModel)]="keyword"
      (keyup.enter)="queryKeyword(keyword)" />

    <div class="hot-news-container" *ngIf="!isFixed">
      <div class="hot-news-title">热点</div>
      <div class="hot-news-grid">
        <div class="hot-news-item" *ngFor="let news of hots | slice:0:9; let i = index">
          <span class="rank">{{i+1}}</span>
          <span class="news-title"><a (click)="queryKeyword(news.id._source.labels.zh.value)">{{
              news['id']._source.labels.zh.value }}</a><span *ngIf="i<3" class="hot-label">热</span></span>
        </div>

      </div>
    </div>
  </div>
  <x-card [header]="header">
    <ng-template #header>
      <span>发现</span>
    </ng-template>
    <div class="news-grid">
      <div *ngFor="let entity of entities" class="news-card" [style.grid-column]="getCardWidth(entity)">
        <img *ngFor="let image of entity['_source']?.images?.slice(0,1)"
          [src]="image.startsWith('http') ? image : 'http://localhost:9000/kgms/' + image"
          alt="{{ entity['_source']?.labels?.zh?.value  }}" loading="lazy" />
        <h3 style="cursor: pointer;" [routerLink]="'/search/info/'+entity._id"> {{entity['_source']?.labels?.zh?.value}}
        </h3>
        <p>{{ entity['_source']?.descriptions?.zh?.value }}</p>
      </div>
    </div>
  </x-card>

</div>