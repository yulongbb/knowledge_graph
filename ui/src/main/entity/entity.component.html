<x-input-group compact>
  <x-input [style.width.%]="25" placeholder="输入内容" [(ngModel)]="keyword" (keyup.enter)="search(keyword)"></x-input>
  <x-button icon="fto-search" (click)="search(keyword)"></x-button>
</x-input-group>


<au-tool>
  <div>
    <x-radio [data]="layout" [(ngModel)]="model" icon></x-radio>
  </div>
  <div>
    <x-button type="primary" icon="fto-plus" (click)="action('add')">新增</x-button>
    <x-button type="success" icon="fto-plus" (click)="action('fusion')">融合</x-button>
    <x-button type="warning" icon="fto-plus" (click)="action('restore')">还原</x-button>
    <x-button type="danger" icon="fto-plus" (click)="action('delete')">删除</x-button>
  </div>
</au-tool>

<ng-template #nodeTpl let-node="$node">
  <span class="select-item"> {{ node?.name }} </span>
</ng-template>

<x-container *ngIf="model=='卡片'">
  <x-main><x-row class="row">
      <x-col *ngFor="let row of (data$ | async)['list'] " span="6">
        <x-card class="card" [bodyStyle]="{height:'250px',padding: 0}">
          <div style="height: 180px; overflow: hidden; display:flex; justify-content:center; align-items: center">
            <x-avatar [size]="{ xs: 20, sm: 60, md: 90, lg: 120, xl: 160 }" [label]="row['label'][0]"></x-avatar>
          </div>
          <div class="bottom">
            <p>{{row['description'][0]}}</p>
            <div class="time">
              <x-button type="primary">查看</x-button>
              <x-button type="info">编辑</x-button>
              <x-button type="danger">删除</x-button>
            </div>
          </div>
        </x-card>
      </x-col>
    </x-row></x-main>
  <x-footer>
    <div class="row">
      <x-pagination [index]="index" [size]="size" [total]="(data$ | async)['total']"></x-pagination>
    </div>
  </x-footer>
</x-container>




<!-- 表格栏 -->
<x-table *ngIf="model=='列表'" #tableCom au-adaption [columns]="columns" [data]="data" [size]="size" virtualScroll
  [scroll]="{ x: 1500, y: 600 }"
  [bodyColumnTpl]="{ actions: actionsTpl, type: typeTpl, label: labelTpl  ,    description:descriptionTpl ,    aliase:aliaseTpl  }"
  (activatedChange)="action('info', $event)" loading [allowSelectRow]="true"
  (headCheckboxChange)="headCheckboxChange($event)" (bodyCheckboxChange)="bodyCheckboxChange($event)">
</x-table>
<ng-template #typeTpl let-column="$column" let-row="$row">
  <div>
    {{row['_source'].type }}
  </div>
</ng-template>

<ng-template #labelTpl let-column="$column" let-row="$row">
  <x-link (click)="action('info', row)">
    {{row['_source'].labels?.zh?.value??row['_source'].labels?.en?.value}}
  </x-link>
</ng-template>

<ng-template #descriptionTpl let-column="$column" let-row="$row">
  <x-link (click)="action('info', row)">
    {{row['_source'].descriptions?.zh?.value??row['_source'].descriptions?.en?.value}}
  </x-link>
</ng-template>

<ng-template #aliaseTpl let-column="$column" let-row="$row">
  <x-link (click)="action('info', row)">
    <span *ngFor="let aliase of (row['_source'].aliases?.zh??row['_source'].descriptions?.en)">{{aliase.value}}，</span>
  </x-link>
</ng-template>

<ng-template #actionsTpl let-column="$column" let-row="$row">
  <div class="au-table-actions">

    <x-link icon="fto-eye" (click)="action('info', row)" title="查看"></x-link>
    <x-link icon="fto-edit" (click)="action('edit', row)" title="修改"></x-link>
    <x-link icon="fto-trash-2" (click)="action('delete', row)" title="删除"></x-link>
  </div>
</ng-template>



<x-dialog
  title="标题"
  [(visible)]="visible"
  [placement]="placement()"
  (close)="evt('close')"
  (cancel)="evt('cancel')"
  (confirm)="evt('confirm')"
>
<div class="row">
  <x-card *ngIf="mergedEntity" width="100%" class="card" [bodyStyle]="{ padding: 10, }" [header]="header">
    <ng-template #header>
      <h1>{{mergedEntity?.labels?.zh?.value}} (<small *ngFor="let aliase of mergedEntity?.aliases?.zh">{{aliase.value}},</small>)
      </h1>
     
    </ng-template>
    <div class="bottom">
      <p>{{mergedEntity?.descriptions?.zh?.value}}</p>

      <!-- <div class="time">
        <x-tag *ngFor="let item of mergedEntity?.items">{{item}}</x-tag>
        
      </div> -->
    </div>
  </x-card>
</div>
  
</x-dialog>