<div class="data-source-panel">
  <div class="panel-header">
    <button class="add-source-btn" (click)="addDataSource()">+ æ·»åŠ æ•°æ®æº</button>
  </div>
  
  <div class="data-source-list">
    <div 
      class="data-source-item" 
      *ngFor="let source of dataSources; trackBy: trackByFn"
      [class.connected]="source.connected"
      [class.selected]="selectedSource?.id === source.id"
      (click)="selectDataSource(source)"
    >
      <div class="source-info">
        <span class="source-name">{{ source.name }}</span>
        <span class="source-type">{{ getTypeLabel(source.type) }}</span>
      </div>
      <div class="source-actions">
        <button 
          class="action-btn connect-btn" 
          [class.connected]="source.connected"
          (click)="toggleConnection(source, $event)"
          [title]="source.connected ? 'æ–­å¼€è¿æ¥' : 'è¿æ¥'"
        >
          {{ source.connected ? 'å·²è¿æ¥' : 'æœªè¿æ¥' }}
        </button>
        <button 
          class="action-btn config-btn" 
          (click)="configureDataSource(source, $event)"
          title="é…ç½®"
        >
          âš™ï¸
        </button>
        <button 
          class="action-btn delete-btn" 
          (click)="deleteDataSource(source, $event)"
          title="åˆ é™¤"
        >
          ğŸ—‘ï¸
        </button>
      </div>
      <span class="source-status" [class.connected]="source.connected"></span>
    </div>
  </div>

  <div class="data-preview" *ngIf="selectedSource">
    <h4>æ•°æ®é¢„è§ˆ - {{ selectedSource.name }}</h4>
    <div class="preview-content">
      <div *ngIf="!selectedSource.connected" class="no-connection">
        <div class="no-connection-icon">ğŸ”Œ</div>
        <div>è¯·å…ˆè¿æ¥æ•°æ®æº</div>
      </div>
      <div *ngIf="selectedSource.connected" class="data-table">
        <table>
          <thead>
            <tr>
              <th *ngFor="let col of previewColumns">{{ col }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of previewData">
              <td *ngFor="let col of previewColumns">{{ row[col] }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
